{"version":3,"file":"static/js/688.6cdf053f.chunk.js","mappings":"0HAEA,MAMA,E,QANiBA,EAAMC,OAAO,CAC5BC,QAAS,mDACTC,QAAS,IACTC,QAAS,CAAC,kBAAmB,YCD/B,MAGMC,GAAWC,E,QAAAA,IAHI,2CACK,oNAIbC,EAAcC,UACzB,MAAM,KAAEC,EAAI,MAAEC,SAAgBL,EAC3BM,KAAK,YACLC,OAAO,KAEV,OAAIF,GACFG,QAAQC,IAAI,eAAgBJ,GACrB,IAGFD,GAsBHM,EAAc,mNACPC,EAAWR,UAEpB,IACI,MAAMS,EAAK,YAUX,aATuBC,EAASC,KAAKF,EAAIG,EAAK,CAEzChB,QAAS,CACZiB,OAAQN,EACRO,cAAc,UAADC,OAAYR,GACzB,eAAgB,mBAChBS,OAAQ,0BAKd,CAAE,MAAOd,GACLG,QAAQC,IAAIJ,EAEhB,E,0FCzDJ,MAGML,GAAWC,EAAAA,EAAAA,IAHI,2CACK,oNAoE1B,EAjEcmB,KACV,MAAOC,EAAKC,IAASC,EAAAA,EAAAA,aACdC,EAAOC,IAAWF,EAAAA,EAAAA,aAClBG,EAAKC,IAASJ,EAAAA,EAAAA,aACdK,EAAMC,IAAUN,EAAAA,EAAAA,YAEvBf,QAAQC,IAAIY,GACZb,QAAQC,IAAIe,GACZhB,QAAQC,IAAIiB,GACZlB,QAAQC,IAAImB,GAoCd,OACEE,EAAAA,EAAAA,MAAA,QAAMC,SAnCgB5B,UACtB6B,EAAEC,iBACF,IAAIC,EAAW,KAEhB,GAAIN,EAAO,CAEV,MAAMO,EAAWP,EAAMP,KAEjBe,EAAQ,GAAAlB,OAAMmB,KAAKC,MAAK,KAAApB,OAAIiB,IAE5B,MAAE9B,SAAgBL,EAASuC,QAC5BjC,KAAK,kBACLkC,OAAO,WAADtB,OAAYkB,GAAYR,GAEnC,GAAIvB,EAEA,YADAoC,MAAM,qFAKVP,EAAQ,WAAAhB,OAAckB,EAC1B,CAEI,MAAMrB,EAAO,CACTM,OACAqB,MAAOlB,EACPmB,YAAajB,EACbkB,UAAWV,SAGTvB,EAAAA,EAAAA,IAASI,IAKkB8B,UAAU,+DAA8DC,SAAA,EAC7FC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIV,EAAQU,EAAEiB,OAAOC,OAAQL,UAAU,0CAA0CM,KAAK,OAAOC,YAAY,oBAE/HL,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIP,EAAUO,EAAEiB,OAAOC,OAAQL,UAAU,0CAA0CM,KAAK,SAASC,YAAY,sBAEnIL,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mCAAkCC,UAC7CC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIL,EAAQK,EAAEiB,OAAOC,OAAQL,UAAU,0CAA0CM,KAAK,OAAOC,YAAY,mBAE/HtB,EAAAA,EAAAA,MAAA,OAAKe,UAAU,kCAAiCC,SAAA,EAChDC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,kBACHC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIH,EAASG,EAAEiB,OAAOI,MAAM,IAAKR,UAAU,0CAA0CM,KAAK,OAAOC,YAAY,qBAEvIL,EAAAA,EAAAA,KAAA,UAAQF,UAAU,wCAAuCC,SAAC,c","sources":["services/instance.js","services/bAfter.js","pages/Admin.jsx"],"sourcesContent":["import axios from \"axios\";\n\nconst instance = axios.create({\n  baseURL: 'https://mghjjzmyuuvrnydiaqcb.supabase.co/rest/v1',\n  timeout: 1000,\n  headers: {'X-Custom-Header': 'foobar',\n  }\n});\nexport default instance;\n","import instance from \"./instance\";\n\nimport { createClient } from \"@supabase/supabase-js\";\n\nconst SUPABASE_URL = \"https://mghjjzmyuuvrnydiaqcb.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1naGpqem15dXV2cm55ZGlhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNTU1NDYsImV4cCI6MjA3ODYzMTU0Nn0.XW3RhwfjldSxEEZSjy7t783sz2LhShh4n-hcyEBJfnk\";\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n\nexport const getPatients = async () => {\n  const { data, error } = await supabase\n    .from(\"patients\")  // اسم جدول\n    .select(\"*\");      // همه ستون‌ها\n\n  if (error) {\n    console.log(\"Fetch error:\", error);\n    return [];\n  }\n\n  return data;\n};\nexport const getPatientImageUrl = (filePath) => {\n  if (!filePath) return \"\";\n  \n  // اگر باکت Public هست:\n  const { publicUrl } = supabase\n    .storage\n    .from(\"patient-images\")\n    .getPublicUrl(filePath);\n\n  return publicUrl;\n\n  // اگر باکت Private هست، از Signed URL استفاده کن:\n  // const { data } = await supabase\n  //   .storage\n  //   .from(\"patient-images\")\n  //   .createSignedUrl(filePath, 60); // 60 ثانیه اعتبار\n  // return data.signedUrl;\n};\n\n\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1naGpqem15dXV2cm55ZGlhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNTU1NDYsImV4cCI6MjA3ODYzMTU0Nn0.XW3RhwfjldSxEEZSjy7t783sz2LhShh4n-hcyEBJfnk\"; \nexport const postData = async (body)=>{\n\n    try {\n        const url =\"/patients\"\n        const response = await instance.post(url,body,{\n\n             headers: {\n          apikey: supabaseKey,\n          Authorization: `Bearer ${supabaseKey}`,\n          \"Content-Type\": \"application/json\",\n          Prefer: \"return=representation\"\n        }\n        })\n        return response\n        \n    } catch (error) {\n        console.log(error);\n        \n    }\n}","import React, { useState } from 'react'\nimport { postData } from '../services/bAfter'\nimport { createClient } from \"@supabase/supabase-js\";\nconst SUPABASE_URL = \"https://mghjjzmyuuvrnydiaqcb.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1naGpqem15dXV2cm55ZGlhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNTU1NDYsImV4cCI6MjA3ODYzMTU0Nn0.XW3RhwfjldSxEEZSjy7t783sz2LhShh4n-hcyEBJfnk\"; // اینو از پروژه خودت بردار\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\nconst Admin = () => {\n    const [name,setName]=useState()\n    const [number,setNumber]=useState()\n    const [desc,setDesc]=useState()\n    const [image,setImage]=useState()\n\n    console.log(name);\n    console.log(number);\n    console.log(desc);\n    console.log(image);\n\n  const postDataHandler = async (e) =>{\n    e.preventDefault();\n    let imageUrl = null;\n\n   if (image) {\n    // ساخت اسم امن برای فایل\n    const safeName = image.name\n      \n    const fileName = `${Date.now()}-${safeName}`;\n\n    const { error } = await supabase.storage\n        .from(\"patient-images\")\n        .upload(`uploads/${fileName}`, image);\n\n    if (error) {\n        alert(\"خطا در آپلود عکس\");\n        return;\n    }\n\n    // ذخیره فقط path امن\n    imageUrl = `uploads/${fileName}`;\n}\n\n    const body = {\n        name,\n        phone: number,\n        description: desc,\n        image_url: imageUrl\n    };\n\n    await postData(body);\n};\n\n    \n  return (\n    <form onSubmit={postDataHandler} className='flex flex-col w-full justify-center items-center mt-20 gap-5'>\n                <div className='w-1/3  border-gray-300'>\n                    <input onChange={(e)=>setName(e.target.value)} className='p-2 border-[1px] border-gray-400 w-full' type='text' placeholder='patient-name'/>\n                </div>\n                <div className='w-1/3  border-gray-300'>\n                    <input onChange={(e)=>setNumber(e.target.value)} className='p-2 border-[1px] border-gray-400 w-full' type='number' placeholder='patient-number'/>\n                </div>\n                <div className='w-1/3  border-1 border-gray-300 '>\n                    <input onChange={(e)=>setDesc(e.target.value)} className='p-2 border-[1px] border-gray-400 w-full' type='text' placeholder='description'/>\n                </div>\n                <div className='w-1/3  border-1 border-gray-300'>\n                <label>upload image</label>\n                    <input onChange={(e)=>setImage(e.target.files[0])} className='p-2 border-[1px] border-gray-400 w-full' type='file' placeholder='insert-image'/>\n                </div>\n            <button className='w-[150px] p-2 bg-green-500 text-white'>submit</button>\n    </form>\n  )\n}\n\nexport default Admin"],"names":["axios","create","baseURL","timeout","headers","supabase","createClient","getPatients","async","data","error","from","select","console","log","supabaseKey","postData","url","instance","post","body","apikey","Authorization","concat","Prefer","Admin","name","setName","useState","number","setNumber","desc","setDesc","image","setImage","_jsxs","onSubmit","e","preventDefault","imageUrl","safeName","fileName","Date","now","storage","upload","alert","phone","description","image_url","className","children","_jsx","onChange","target","value","type","placeholder","files"],"sourceRoot":""}