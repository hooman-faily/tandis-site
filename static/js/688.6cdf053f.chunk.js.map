{"version":3,"file":"static/js/688.6cdf053f.chunk.js","mappings":"0HAEA,MAMA,E,QANiBA,EAAMC,OAAO,CAC5BC,QAAS,mDACTC,QAAS,IACTC,QAAS,CAAC,kBAAmB,YCD/B,MAGMC,GAAWC,E,QAAAA,IAHI,2CACK,oNAIbC,EAAcC,UACzB,MAAM,KAAEC,EAAI,MAAEC,SAAgBL,EAC3BM,KAAK,YACLC,OAAO,KAEV,OAAIF,GACFG,QAAQC,IAAI,eAAgBJ,GACrB,IAGFD,GAsBHM,EAAc,mNACPC,EAAWR,UAEpB,IACI,MAAMS,EAAK,YAUX,aATuBC,EAASC,KAAKF,EAAIG,EAAK,CAEzChB,QAAS,CACZiB,OAAQN,EACRO,cAAc,UAADC,OAAYR,GACzB,eAAgB,mBAChBS,OAAQ,0BAKd,CAAE,MAAOd,GACLG,QAAQC,IAAIJ,EAEhB,E,0FCzDJ,MAGML,GAAWC,EAAAA,EAAAA,IAHI,2CACK,oNAoE1B,EAjEcmB,KACV,MAAOC,EAAKC,IAASC,EAAAA,EAAAA,aACdC,EAAOC,IAAWF,EAAAA,EAAAA,aAClBG,EAAKC,IAASJ,EAAAA,EAAAA,aACdK,EAAMC,IAAUN,EAAAA,EAAAA,YAEvBf,QAAQC,IAAIY,GACZb,QAAQC,IAAIe,GACZhB,QAAQC,IAAIiB,GACZlB,QAAQC,IAAImB,GAoCd,OACEE,EAAAA,EAAAA,MAAA,QAAMC,SAnCgB5B,UACtB6B,EAAEC,iBACF,IAAIC,EAAW,KAEhB,GAAIN,EAAO,CAEV,MAAMO,EAAWP,EAAMP,KAEjBe,EAAQ,GAAAlB,OAAMmB,KAAKC,MAAK,KAAApB,OAAIiB,IAE5B,MAAE9B,SAAgBL,EAASuC,QAC5BjC,KAAK,kBACLkC,OAAO,WAADtB,OAAYkB,GAAYR,GAEnC,GAAIvB,EAEA,YADAoC,MAAM,qFAKVP,EAAQ,WAAAhB,OAAckB,EAC1B,CAEI,MAAMrB,EAAO,CACTM,OACAqB,MAAOlB,EACPmB,YAAajB,EACbkB,UAAWV,SAGTvB,EAAAA,EAAAA,IAASI,IAKkB8B,UAAU,+DAA8DC,SAAA,EAC7FC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIV,EAAQU,EAAEiB,OAAOC,OAAQL,UAAU,0CAA0CM,KAAK,OAAOC,YAAY,oBAE/HL,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIP,EAAUO,EAAEiB,OAAOC,OAAQL,UAAU,0CAA0CM,KAAK,SAASC,YAAY,sBAEnIL,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mCAAkCC,UAC7CC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIL,EAAQK,EAAEiB,OAAOC,OAAQL,UAAU,0CAA0CM,KAAK,OAAOC,YAAY,mBAE/HtB,EAAAA,EAAAA,MAAA,OAAKe,UAAU,kCAAiCC,SAAA,EAChDC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,kBACHC,EAAAA,EAAAA,KAAA,SAAOC,SAAWhB,GAAIH,EAASG,EAAEiB,OAAOI,MAAM,IAAKR,UAAU,0CAA0CM,KAAK,OAAOC,YAAY,qBAEvIL,EAAAA,EAAAA,KAAA,UAAQF,UAAU,wCAAuCC,SAAC,c","sources":["services/instance.js","services/bAfter.js","pages/Admin.jsx"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'https://mghjjzmyuuvrnydiaqcb.supabase.co/rest/v1',\r\n  timeout: 1000,\r\n  headers: {'X-Custom-Header': 'foobar',\r\n  }\r\n});\r\nexport default instance;\r\n","import instance from \"./instance\";\r\n\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst SUPABASE_URL = \"https://mghjjzmyuuvrnydiaqcb.supabase.co\";\r\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1naGpqem15dXV2cm55ZGlhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNTU1NDYsImV4cCI6MjA3ODYzMTU0Nn0.XW3RhwfjldSxEEZSjy7t783sz2LhShh4n-hcyEBJfnk\";\r\n\r\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\r\n\r\nexport const getPatients = async () => {\r\n  const { data, error } = await supabase\r\n    .from(\"patients\")  // اسم جدول\r\n    .select(\"*\");      // همه ستون‌ها\r\n\r\n  if (error) {\r\n    console.log(\"Fetch error:\", error);\r\n    return [];\r\n  }\r\n\r\n  return data;\r\n};\r\nexport const getPatientImageUrl = (filePath) => {\r\n  if (!filePath) return \"\";\r\n  \r\n  // اگر باکت Public هست:\r\n  const { publicUrl } = supabase\r\n    .storage\r\n    .from(\"patient-images\")\r\n    .getPublicUrl(filePath);\r\n\r\n  return publicUrl;\r\n\r\n  // اگر باکت Private هست، از Signed URL استفاده کن:\r\n  // const { data } = await supabase\r\n  //   .storage\r\n  //   .from(\"patient-images\")\r\n  //   .createSignedUrl(filePath, 60); // 60 ثانیه اعتبار\r\n  // return data.signedUrl;\r\n};\r\n\r\n\r\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1naGpqem15dXV2cm55ZGlhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNTU1NDYsImV4cCI6MjA3ODYzMTU0Nn0.XW3RhwfjldSxEEZSjy7t783sz2LhShh4n-hcyEBJfnk\"; \r\nexport const postData = async (body)=>{\r\n\r\n    try {\r\n        const url =\"/patients\"\r\n        const response = await instance.post(url,body,{\r\n\r\n             headers: {\r\n          apikey: supabaseKey,\r\n          Authorization: `Bearer ${supabaseKey}`,\r\n          \"Content-Type\": \"application/json\",\r\n          Prefer: \"return=representation\"\r\n        }\r\n        })\r\n        return response\r\n        \r\n    } catch (error) {\r\n        console.log(error);\r\n        \r\n    }\r\n}","import React, { useState } from 'react'\r\nimport { postData } from '../services/bAfter'\r\nimport { createClient } from \"@supabase/supabase-js\";\r\nconst SUPABASE_URL = \"https://mghjjzmyuuvrnydiaqcb.supabase.co\";\r\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1naGpqem15dXV2cm55ZGlhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNTU1NDYsImV4cCI6MjA3ODYzMTU0Nn0.XW3RhwfjldSxEEZSjy7t783sz2LhShh4n-hcyEBJfnk\"; // اینو از پروژه خودت بردار\r\n\r\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\r\nconst Admin = () => {\r\n    const [name,setName]=useState()\r\n    const [number,setNumber]=useState()\r\n    const [desc,setDesc]=useState()\r\n    const [image,setImage]=useState()\r\n\r\n    console.log(name);\r\n    console.log(number);\r\n    console.log(desc);\r\n    console.log(image);\r\n\r\n  const postDataHandler = async (e) =>{\r\n    e.preventDefault();\r\n    let imageUrl = null;\r\n\r\n   if (image) {\r\n    // ساخت اسم امن برای فایل\r\n    const safeName = image.name\r\n      \r\n    const fileName = `${Date.now()}-${safeName}`;\r\n\r\n    const { error } = await supabase.storage\r\n        .from(\"patient-images\")\r\n        .upload(`uploads/${fileName}`, image);\r\n\r\n    if (error) {\r\n        alert(\"خطا در آپلود عکس\");\r\n        return;\r\n    }\r\n\r\n    // ذخیره فقط path امن\r\n    imageUrl = `uploads/${fileName}`;\r\n}\r\n\r\n    const body = {\r\n        name,\r\n        phone: number,\r\n        description: desc,\r\n        image_url: imageUrl\r\n    };\r\n\r\n    await postData(body);\r\n};\r\n\r\n    \r\n  return (\r\n    <form onSubmit={postDataHandler} className='flex flex-col w-full justify-center items-center mt-20 gap-5'>\r\n                <div className='w-1/3  border-gray-300'>\r\n                    <input onChange={(e)=>setName(e.target.value)} className='p-2 border-[1px] border-gray-400 w-full' type='text' placeholder='patient-name'/>\r\n                </div>\r\n                <div className='w-1/3  border-gray-300'>\r\n                    <input onChange={(e)=>setNumber(e.target.value)} className='p-2 border-[1px] border-gray-400 w-full' type='number' placeholder='patient-number'/>\r\n                </div>\r\n                <div className='w-1/3  border-1 border-gray-300 '>\r\n                    <input onChange={(e)=>setDesc(e.target.value)} className='p-2 border-[1px] border-gray-400 w-full' type='text' placeholder='description'/>\r\n                </div>\r\n                <div className='w-1/3  border-1 border-gray-300'>\r\n                <label>upload image</label>\r\n                    <input onChange={(e)=>setImage(e.target.files[0])} className='p-2 border-[1px] border-gray-400 w-full' type='file' placeholder='insert-image'/>\r\n                </div>\r\n            <button className='w-[150px] p-2 bg-green-500 text-white'>submit</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Admin"],"names":["axios","create","baseURL","timeout","headers","supabase","createClient","getPatients","async","data","error","from","select","console","log","supabaseKey","postData","url","instance","post","body","apikey","Authorization","concat","Prefer","Admin","name","setName","useState","number","setNumber","desc","setDesc","image","setImage","_jsxs","onSubmit","e","preventDefault","imageUrl","safeName","fileName","Date","now","storage","upload","alert","phone","description","image_url","className","children","_jsx","onChange","target","value","type","placeholder","files"],"sourceRoot":""}